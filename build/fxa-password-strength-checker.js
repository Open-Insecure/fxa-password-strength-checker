/**
 * Copyright (c) 2011, Jason Davies
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * - Redistributions of source code must retain the above copyright notice, this
 *   list of conditions and the following disclaimer.
 *
 * - Redistributions in binary form must reproduce the above copyright notice,
 *   this list of conditions and the following disclaimer in the documentation
 *   and/or other materials provided with the distribution.
 *
 * - The name Jason Davies may not be used to endorse or promote products
 *   derived from this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL JASON DAVIES BE LIABLE FOR ANY DIRECT, INDIRECT,
 * INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
 * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE
 * OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF
 * ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * Original source can be found at:
 *   https://github.com/jasondavies/bloomfilter.js/
**/

define('bloomfilter',[], function () {
  'use strict';
  var typedArrays = typeof ArrayBuffer !== 'undefined';

  // Creates a new bloom filter.  If *m* is an array-like object, with a length
  // property, then the bloom filter is loaded with data from the array, where
  // each element is a 32-bit integer.  Otherwise, *m* should specify the
  // number of bits.  Note that *m* is rounded up to the nearest multiple of
  // 32.  *k* specifies the number of hashing functions.
  function BloomFilter(m, k) {
    /* eslint complexity:[2, 10] */
    var a;
    if (typeof m !== 'number') {
      a = m, m = a.length * 32; //eslint-disable-line
    }

    var n = Math.ceil(m / 32),
        i = -1;
    this.m = m = n * 32;
    this.k = k;

    if (typedArrays) {
      // if typed arrays are supported
      var kbytes = 1 << Math.ceil(Math.log(Math.ceil(Math.log(m) / Math.LN2 / 8)) / Math.LN2),
          array = (kbytes === 1) ?
                                  (Uint8Array) :
                                  (kbytes === 2 ?
                                                Uint16Array : Uint32Array),
          kbuffer = new ArrayBuffer(kbytes * k),
          buckets = this.buckets = new Int32Array(n);
      if (a) {
        i = i + 1;
        while (i < n) {
          buckets[i] = a[i];
          i++;
        }
      }

      this._locations = new array(kbuffer);
    } else {
      // typed arrays not supported
      buckets = this.buckets = [];
      if (a) {
        i = i + 1;
        while (i < n) {
          buckets[i] = a[i];
          i++;
        }
      }
      else {
        i = i + 1;
        while (i < n) {
          //initialize bucket with zeroes
          buckets[i] = 0;
          i++;
        }
      }
      this._locations = [];
    }
  }

  // See http://willwhim.wpengine.com/2011/09/03/producing-n-hash-functions-by-hashing-only-once/
  BloomFilter.prototype.locations = function(v) {
    var k = this.k,
        m = this.m,
        r = this._locations,
        a = fnv_1a(v),
        b = fnv_1a_b(a),
        x = a % m;
    for (var i = 0; i < k; i++) {
      r[i] = x < 0 ? (x + m) : x;
      x = (x + b) % m;
    }
    return r;
  };

  BloomFilter.prototype.add = function(v) {
    var l = this.locations(v + ''),
        k = this.k,
        buckets = this.buckets;
    for (var i = 0; i < k; i++) {
      buckets[Math.floor(l[i] / 32)] |= 1 << (l[i] % 32);
    }
  };

  BloomFilter.prototype.test = function(v) {
    var l = this.locations(v + ''),
        k = this.k,
        buckets = this.buckets;
    for (var i = 0; i < k; i++) {
      var b = l[i];
      if ((buckets[Math.floor(b / 32)] & (1 << (b % 32))) === 0) {
        return false;
      }
    }
    return true;
  };

  // Estimated cardinality.
  BloomFilter.prototype.size = function() {
    var buckets = this.buckets,
        bits = 0;
    for (var i = 0, n = buckets.length; i < n; i++) {
      bits += popcnt(buckets[i]);
    }
    return -this.m * Math.log(1 - bits / this.m) / this.k;
  };

  // http://graphics.stanford.edu/~seander/bithacks.html#CountBitsSetParallel
  function popcnt(v) {
    v -= (v >> 1) & 0x55555555;
    v = (v & 0x33333333) + ((v >> 2) & 0x33333333);
    return ((v + (v >> 4) & 0xf0f0f0f) * 0x1010101) >> 24;
  }

  // Fowler/Noll/Vo hashing.
  function fnv_1a(v) {
    var a = 2166136261;
    for (var i = 0, n = v.length; i < n; i++) {
      var c = v.charCodeAt(i),
          d = c & 0xff00;
      if (d) {
        a = fnv_multiply(a ^ d >> 8);
      }
      a = fnv_multiply(a ^ c & 0xff);
    }
    return fnv_mix(a);
  }

  // a * 16777619 mod 2**32
  function fnv_multiply(a) {
    return a + (a << 1) + (a << 4) + (a << 7) + (a << 8) + (a << 24);
  }

  // One additional iteration of FNV, given a hash.
  function fnv_1a_b(a) {
    return fnv_mix(fnv_multiply(a));
  }

  // See https://web.archive.org/web/20131019013225/http://home.comcast.net/~bretm/hash/6.html
  function fnv_mix(a) {
    a += a << 13;
    a ^= a >>> 7;
    a += a << 3;
    a ^= a >>> 17;
    a += a << 5;
    return a & 0xffffffff;
  }
  return BloomFilter;
});

define('bloomdata-top100k',[], function () {
  return {"numberOfHashes":8,"bloomFilterData":[1914001024,-1510363223,-1850159457,-22395695,-136870762,163921512,-1903258902,921020197,-340292679,1573354930,-1043833880,1187654900,-583580001,-78785447,-230477779,315058759,-554018329,2144340741,-697242683,-1053516497,-686978169,1381047805,-1237003852,-235921934,-2039516327,528398935,-1459133421,-447186997,-1691992663,-508041032,-240677125,2042264858,1674769903,-310513356,-403282722,-107649557,1497245236,1724927960,-1466452251,1831042283,-57466001,-342606075,-923819535,-1029281355,-1724418493,1813959798,-2072716519,-1755413013,1247309102,-1006897167,2142071516,412796410,17191209,-245871482,346528036,530629062,324021907,529681247,-1346378218,1549368058,611962199,-1409725158,455341524,1050784822,1880718939,-577915304,2077657569,-90227022,-1572762193,1155391419,-1329648641,-1420067740,1873800210,-284593971,577102104,-1400212650,2015108990,-688770854,-552121458,235657511,1535001864,-565299497,-1411033818,-281762335,-1219245237,-1390560508,-336372897,1106722341,1098181246,2063948279,-84330550,-209923025,-1643449074,490024293,-560700746,-25825307,798864784,117295486,2002164102,1061577510,7284183,-2054766453,-54576727,963514095,-1916553347,-1747208066,1303926231,-301601472,2861379,-625870339,-95487817,-276437589,508025240,-999971551,1732559909,1964962676,-834658758,2054680075,1945912524,1943079830,-287359111,-366677279,1205140412,793998309,-1111033643,-181578443,-337888574,960197743,1440389565,-1228476961,-571744641,1588315966,1892500783,1908943718,1939157620,-1537243265,1283436376,-344551556,13817283,-150175649,-938348663,1272846851,1950154052,2137307887,1714769804,1030888588,-201405416,2143287542,-306816793,-234588332,580431836,-1284847604,1164732995,-1602045529,-1862734041,651349185,-13090489,-578763876,1557806428,1892878389,-1657354071,694110629,-2019440292,-1309684911,250158718,-865517588,-474484378,1410823907,81844429,-123137453,816265011,-182020292,1201201058,-1093240871,-1862893529,-679289397,-926161328,-95672388,2111894723,1794139800,-41513180,-822490838,-706529077,-750608551,1908918158,66911803,1165889466,1815486450,-1933380564,2119357473,850654034,-215196958,1928273112,630122301,-987332686,1840962431,-1653928290,-542422692,-101978483,1648532928,1359073251,-40070866,1687801335,-1640981560,-1629810483,-1672243529,1180229239,1374342116,-367560466,-595608279,106194271,-1679329777,2122144402,832202907,-17001652,-286389581,434619734,1851377545,1893953455,475500200,1315084948,512201428,106028825,-1745637523,1726744286,759299207,-330068841,-2074654079,-450888095,-1309055328,-1234003977,-558459146,200247252,-647428426,-377595807,315719447,-775947435,-1319686414,-359158495,-1147973892,1340678913,-865382777,-579323248,-1823290917,-1096914919,314096126,-774314618,1763164053,1869385865,148657593,-1066845827,-574274711,1206642956,1530510570,2003065591,-1347695277,-823723053,1655270477,2073232013,-1673111228,636358602,-42160310,997030979,-1647205435,1359140548,530494825,-831091415,-744228584,-1342723219,1493724649,2045617806,500961514,-743675237,-807709016,-674383808,-1125256557,765698367,-893065093,-627111557,-1272361403,1426868927,2143538926,2075208376,-106060277,-1541693231,-1735414020,-121791017,-1906033874,1600895009,720466039,1842035407,1968487521,421261142,-146015290,490353627,-1648801148,688584941,-1322038789,813938189,1861359193,1021246911,1869847333,-476158666,1056293933,-154917166,245252451,-478869891,-1411339131,-1915378092,-990030037,-961950329,1387633911,1945873892,318504105,492002989,-168821356,-1373642460,949348687,-272209516,501790418,-840768152,-309375517,-1342710226,-126397589,-1065556361,1288043719,287777526,-113166187,743316298,952676937,1957468603,1314117614,2017012413,-594283740,642895002,-251430692,1555564513,-723610760,1525888295,-2028085275,1311735080,909916227,2008557669,-1084014648,-2057484453,1116905624,-717035498,1283585037,-653826499,-1863608793,-2043613905,1523453551,181579059,-835518769,2104883188,-68225840,665244513,502768197,2116349311,-361729568,1551602879,-1213865402,1658461839,-789698145,-852567886,-1882268666,1477567579,1768224492,2054520243,-1939632671,2044325278,1619227238,1983674474,859589299,296773401,-1599510657,-215705804,-1330468715,1220484335,-866257285,-1402212506,1293642183,-572963752,-1644473929,-1151378693,-183104094,-682844870,1754665982,1548627032,-608995685,-823569178,2009042584,-1761170490,-1300596604,566254897,-1641969916,-586974468,494927855,-1662270388,1027111390,414905646,-760682025,814907106,-43899585,1034313630,-881511972,1167519796,-1775294041,1772754357,-952568243,-724863771,-836981477,1335274139,-2032243549,2108411034,1772034279,1982260428,-1342864516,-609075943,253284559,2134330597,-85331022,1473243258,1463153583,-1043726948,-561344392,2131481692,234490500,1766039514,-897377083,-564879217,-1568349354,1637553788,2133059441,-1681550065,-465348033,7339007,-2030569567,-431555087,-1570275801,973581278,940421081,-1772542558,1496645479,2003418863,-424575137,-2132496602,-827173515,347378023,1691333417,1583719311,-166240056,-1433600717,1533922197,1485682342,-851816979,1106734804,290089530,-1378613653,-1603354955,-1723682257,1725270467,1551591530,1240923235,390667645,-1160161483,2128136929,791654701,1521154907,-1620629735,1963591739,-41261157,1190986047,1764880183,932881985,-38849197,-1897120533,-940246678,181662498,1186437211,-1016186307,1044429762,2069053282,-215795457,-1004243500,1733213765,-2007397730,-1995295279,-1487989275,-199327807,1295675230,-600406530,1341647910,214127221,1030417445,338722291,1053212293,1910982959,1067146381,1681900874,-549571309,1539635372,-60768536,1106537131,-750722459,-450925292,-1274365290,-350837319,929522166,-556169063,787004270,633804849,1201649448,2098912305,-64600551,843010908,-409081246,2021519279,-1214339009,-443230545,1588955250,1907297621,-1652876041,-875835299,-1193992787,1425713086,1671955103,182009366,350930559,1699829567,-933799877,-1357562553,-427301828,-861651202,-180303992,1480402486,-1150488611,-1282965724,-1777763619,-397217308,-684994415,584696894,-144528268,1117160570,-178948295,-1496170312,-1359703877,-913009688,239990541,-246529649,1382768242,2139607181,-725545402,-769483426,1626189399,-1584451787,-1193652644,-1184679939,745426636,-94792094,149155614,2107213672,596179242,393231275,2132890111,1609588669,-696682525,-520159851,1533990231,1121244484,-1885405697,-1519196414,435352021,-1374853317,-1419706973,1832384013,-1793889414,1344468893,-1712154456,-1886487112,-867662095,-351709713,921032803,1281808278,-1011461543,1903557511,-736884646,576243641,1269314856,-377033326,2012267901,266426696,245882208,-1641002547,381286235,1341461806,-1167898269,-1376235730,992017810,-2032824119,1550800157,2036491635,1506613291,-1646885417,178115194,-288468788,1608919980,1890444502,-496484609,634126133,2096514026,-1764013314,-222847787,1961020726,1550909385,-1510017517,-1318742427,1951625807,359367637,-552885715,-1089543301,-62396150,1047584058,2059100335,1037665768,1723792074,-1395982841,1748978126,-309652689,-1264323422,-1871459673,1443458221,-1364054219,-1761990470,-849893345,1591054825,1734415706,406023719,-152914061,-447839941,1328394152,1262675391,490059048,69574309,1957465260,-1189912551,1128077584,-78791736,-28147341,2051414810,-1583662730,952403960,1644727664,-1195938307,-1059279205,1456887158,879594157,-512412203,1974368953,1978210301,-269563445,1478307138,-1111035660,1227212987,1628958163,-1088425415,-1004936967,-134875393,509310923,468650205,13852626,-1164084357,996573037,953612165,-1220066405,-1601446693,-1617999365,-959289141,1539711422,495867852,-26079241,1704426909,1581091148,-1669499567,-1275093549,-288995973,1441520042,-453332900,1501697167,-818107232,-1180942617,-760043114,-1107356395,1921938863,782989183,-1232519355,-207548449,1517965150,493146973,-613632365,459258126,340490478,-120264942,-948980323,-1141000286,308634215,1101406193,1393054453,-168919738,784385399,1652534907,614879229,-1312446009,-858194707,-1832246591,563594974,1875768439,9595907,933766574,2018818767,-912685424,-428804294,819854334,-1144640745,601923259,-321230943,-237822849,-519451968,1491187667,1270679338,2075141246,-1208280459,2094003130,668715577,-1250255835,1694336221,-1077643290,752957702,-1145564911,2113389213,-350041491,-462674249,-420592636,-1044996161,-503729771,-1909381417,1712169982,1315819035,-1134013466,-6704855,2077073461,-818589339,1930993237,-1099111487,1330237712,-462684822,1533140758,-2123480804,-874608193,-1522768635,502423355,529854849,1329453524,-778171757,1113672890,-477178233,-980466500,-823940922,-673209199,-486877316,-1088426539,787815503,1978794435,1892311248,-1582470365,2054082325,-992612582,1931693145,-599953523,-573571737,1996127119,1083802384,182877499,-692665486,-1678231572,-1104517256,-700518664,-841354012,-864374512,-903299397,-210715796,375297023,-1225008519,464344713,-1413770072,2145163121,-644031582,165656421,374216667,-2083636259,-1152082063,2108148127,-195044867,-629976227,-1348780045,-1351091345,-1229260092,-1095188981,-1912399119,-526837383,2009027122,-464684481,1537682148,-2141936949,1648531940,373861751,-399036462,452426646,-328535737,2118840077,-1144917642,-449401247,-882847469,-1663430965,1955011536,-35086566,337272390,-298069411,1664359146,1510177510,-42806657,-1763502422,-442843688,-1383800115,987747353,1467809933,549753414,191972818,-298094163,-1321919197,-1223733076,895853445,1523963665,-880471393,-1099043337,-734568823,-684994678,-1758712692,150532470,-2016609662,1314407714,-615024844,-369271086,802582590,-1075882101,-1633909343,1811693090,-482022369,-1475374216,-566364331,1665219417,-1170971623,-578823302,970902855,-1611039546,1906402746,-610021713,-1433048084,-1100129925,479442398,401237069,-1277596172,1392952695,-1582660500,-637951516,-1357816563,-545958686,-45894447,-619540100,-1280096470,-1987836293,1881597239,-1687870,-201916587,2041088655,1042323422,-1152787055,-1210107889,-1713618420,-1242236902,-363934870,-1662963947,-1913556580,1449244383,-370232425,1224736653,212562264,1718493303,-163679780,1563866484,-550478712,-1077835026,1214976435,1845162757,-1697661082,2014799535,-307726010,1439453951,-288893381,-1804547977,1680551355,-536676886,-1629087126,481240389,801826093,-153404821,-355625012,352175356,1561031102,782499376,-56967769,1539454143,-431145095,2033602029,-1850268865,2068009842,1031569137,958341721,-2006781027,2047720356,1511859231,-421626383,442372531,-201505366,-1221632547,-319933951,1090478927,74450839,-189730209,747468174,336432886,1641841454,1608427739,535559021,-1111819379,265468679,530328861,759129056,1466275238,-25203326,1582080191,711303081,105481825,-1784195338,1603923167,-1614331986,-784269765,-1101315274,1197961858,-221455503,149587692,-1100011305,881696665,209105476,-1748347673,-1187780784,-1659420881,1072586086,-1669450845,-1002612306,-125011806,-28663053,-1646006367,-1250387733,1566248867,-562761380,-79892575,1681072787,-1304268160,1836902283,-1966787361,-1366820090,-1195843594,-1596739899,1318521499,-515433027,-772434196,96413667,-273329732,-1486534808,-1680051657,1842863280,1239873477,1520888607,-730677777,-1373612311,1298491996,1416879546,776828687,-1075000259,-845408536,1864061987,519481595,-1680369955,-700330288,1849413451,-1228525006,216105604,-1197968318,-1060749329,1486578541,-440451585,1111103482,1025200190,-2110949961,-990931537,-669015208,-1368789866,1549911445,-416135670,1036445997,-476841735,1273447166,-304627753,-2066394927,-1214262411,-1078728169,-353966687,-1076601495,1988001573,-1628165460,-685784461,740197798,13924049,-807019905,-410544305,-576985291,-639321894,-1798375251,2136815983,-2005428778,1970798190,1257555315,-589857451,-695494330,-330336713,-23611013,1100017639,1462225630,742830035,640187282,1038302709,532282231,1305550744,302432445,1308088183,1220393350,-1662599115,1050591229,-892355050,-93605770,-1117390534,-1171233298,-11308589,-11305211,-1714562086,-1139541034,1630473733,-61700194,-1477926928,1029228415,-893123517,266596308,-948761698,-19717545,551527014,-1765832113,1035268817,-346849330,1222946040,-76979229,-1516296430,-214386309,1350137073,1555369934,-172315907,1786097489,-2105549230,-16787540,1864274870,1230886800,2074602103,-1218503818,-765187606,-2146967565,-1673865843,-1198819858,-817106383,1180900114,2113590996,737091446,-1446085024,-1404581823,-60313893,-24527691,-1353281386,-1256892646,-1871033516,1671345267,-1594770770,-115727313,1397482959,1599552851,-1128205977,2092301339,347686611,-974192793,1452794803,264061274,556183816,-1418815858,265819468,1303170365,-87915995,-281303699,1672637617,-1856774963,-9352031,1235201735,-1159205497,-1238122014,199612355,-819479893,1294063324,2069630291,-1113312265,-1624909744,-204473717,-377628742,861795355,743177292,658845674,1336266136,1765473770,1921090641,-1078472990,77551057,-201645484,2030890937,1677379932,526009,426532710,435539229,2103263039,-2097967007,139939124,-445778138,1930079750,-563675651,514899494,1600629868,921132466,653091957,-940476086,1432301493,1794356927,-2058833505,-111989201,1371820951,-1047048335,1036927925,1253988384,986647225,-1653121389,-69603479,-2140832863,1162296797,-1705701101,1341153427,-1901227274,-2139418305,1857536249,1543236585,-1098966532,1532224332,-732962036,1997666379,-1912307812,-514942423,-156001183,2109740859,-587319493,1346309245,846439549,-524755308,-799297480,-1497960127,-7340291,537777841,727624542,-1119372332,936760599,-1245864248,1916708355,-250159866,668187784,-1220085879,1034447887,-1381134788,576665977,-230481130,-1915434124,298035037,469577749,1363647872,2052539378,-896941151,-1010332883,1793112495,-673140142,1772675987,-521846286,-910786693,-208724506,1350559399,-7877299,1598245172,502295767,-1476723459,1032382487,804054491,-1930274033,1030076145,-950724264,394233711,-827597417,-977356257,855301976,-323346440,1996178833,1967889794,-979627729,38599387,-720038866,155887095,-828838957,-1534299950,-1870486025,-486596652,-610323611,861261373,1684525550,1298952561,1708765012,-329632275,-1253018964,942111589,-1468376968,-2061002985,-962321627,877426253,1721078450,-268493366,2116831709,-41506850,1500129565,-2093452871,1264328998,-190592069,-1480475657,1062618459,-1403772817,1354541918,-2097923167,1848917694,2030371733,1470008664,-15235384,1350468655,-1445486916,1582080511,1632977849,1174574187,-705147681,-1688317029,-2062461885,-1401465391,-1377103132,1311233372,1923669784,-1477754305,1748016466,1307903423,-1651203113,1844877915,-878718462,-579099745,1568265397,1537648494,-2066364226,-683648801,-363903524,-698561212,476862241,1023186517,122447289,703978980,-874021331,-176839101,-1755127998,-51037485,-1134388274,-296206949,-672001682,2012805708,-417765598,205968445,-1200205899,-2060586772,2095651403,1310813469,1704551326,-1060646096,1078168559,-725919492,962301880,-161382475,1217068673,490470258,-338418681,871477987,1910395488,-1093497796,762527469,1901354997,-1167617377,-126036603,-596103069,1986523111,2129560056,487972016,-160839186,-2040236744,-1153089547,-1034280153,-1490088290,1878556127,-597943739,1489742541,-986257457,-610198047,1802055706,2005772463,-1484134518,-451527463,-276091298,1577048703,-16521284,-1119882908,-35018889,-1302941699,-554430278,677510895,484614564,-149314103,1916757853,1700629999,-1426875029,735655317,-1169012334,-198345027,-1965330444,477786443,1275259312,707595420,-944785325,-730181309,1192605992,-643859186,-133197111,1035329438,-1701573597,-429366663,-965085768,2035213657,1769254842,1549458663,721164249,968781653,1337666544,1008708524,1597135074,-1363093676,2084415723,1284752511,-1127942386,1423310620,-1162953548,-40595654,-707035885,1812776826,-2026114132,-1177793879,-1991093093,1245705311,-463070687,-1444493655,1836296907,1541450453,-774743074,-393050901,-1243624167,1590519680,-151029506,-744326546,1472961781,-160611145,-600178547,-159623925,-227615745,-110731597,1228652513,-1251808337,-652083425,650263038,-86513246,-716610892,-1867096086,-584002046,-229342819,-1969777742,516283148,42777183,-432466113,-1887609362,-555389497,2041840892,959683021,961932476,-1603282332,355304973,473878073,2045290078,-897781464,2043144478,1238891576,-640009870,1717359926,1733045472,-738563420,1987221655,-97178133,-1187516609,-1331272179,-453513989,-1175090214,1295993951,-143538453,-1870680315,-998317457,485030715,23184932,14876338,1851131088,-892150481,896521593,-842745270,962952652,-874646637,1567434649,525147262,769025727,2141128634,-272261779,533883213,-1347340528,-1423462458,-923574815,432904158,955072979,1878272222,888143363,-94803472,1637767739,-1023435690,1664154189,-1686336646,-129667932,-1038184070,-1500640803,2088758251,-1782729517,-751178743,-1124844986,262128780,1146937065,1282464202,32748351,-849496968,1727513118,1073201151,-470293290,-1819574402,-1760043830,1633537614,-219809895,1558305287,-423836685,-698101546,-464957975,-787240682,1305879368,1002274315,1015209835,-202643460,426089258,-1242306077,29948976,-1425985175,-66156554,-136282033,1733196501,-1107403329,-377038716,1440590237,-470173792,-1931002002,967038907,1672769233,-1342332545,-879266905,-445740806,-281052410,-1389426741,1084863430,1264694998,961267379,1817100134,-13812567,170851658,-1900004964,633568992,1851729688,1054407946,-952719270,-196965192,-363889128,865343999,1508042844,1717122166,-189822728,-289669869,-1396080661,-939790009,-1394877491,-1138228658,2054546742,174527939,443795033,1032534453,-586301789,1030868005,-2062881281,-1294783923,650582997,-470343044,1720697528,1436528295,-2126016567,-1244228017,1718349279,-1461545025,-1211833069,1984366923,-80912295,1190898147,-1712378134,-1168836481,-1814808642,801369242,2070042111,-1688184195,1916015961,-1846881154,878706038,2061430261,2091341066,-128007639,1947708787,-1579271216,-187343196,222154425,1198971187,588453716,-1999912369,-802821586,494412890,78117335,823880944,1677296686,-388415362,-879039548,1192379466,-3075963,-235018055,1582132657,121317369,-600862811,804546930,1623453182,-912008636,-428181679,975240053,796948582,-885001278,-1218622709,744004731,-2139453861,-313219756,-1770022029,283754125,-245504935,626012295,-679696656,300725533,528414021,-517414277,-1345304487,1968793725,-1920021369,1560528222,-1212064388,746579996,1934210597,2028746401,459118425,-820952483,-1288933275,-315672451,-1607521851,-1003751879,-1491696163,368806898,930727615,-1953144073,-686213702,-1074548907,1842997392,849560927,469163993,103954107,-1968166611,-1383735313,-621727135,1336251014,-362919329,1400812510,-329013322,-244341025,2053228407,-254070764,-1746654145,-88524250,1962895093,-828620410,767346938,-545864701,-1515862721,1439855964,-953144233,-494411405,1459512481,-939877742,2141799839,-1520882917,-1964059658,1918893559,1425635163,-137006288,1531365627,419255582,537764071,-716101054,-954394623,-41781193,-957235875,1484201305,-849918859,-288327562,-451895388,429529240,685203263,20446472,-235126955,-608341470,1187224237,1073350635,-763299864,24071867,-731335822,-927562258,815053040,396130424,943065428,-878243766,1905295573,-72173025,-2001856761,253307486,-632850058,-526871518,1060363700,-142142949,733745030,-1871462470,1191077470,-990814372,718128757,1865612098,-1477594616,-314553192,2011399891,-1620996573,1490269927,1844027692,1121515417,50003402,1546099103,800986126,1708523190,1608994129,-897671404,-1996727589,-436215799,1308813406,1356845544,-716420221,-167846070,-56730722,-436316202,-436632422,-1879581674,-492779444,-903381044,-1267385466,-281213859,300941806,579299965,-920729164,1635733679,-1250520012,1053610278,-254855402,390765607,-529781129,-1016703041,-1406142324,400424565,-589861031,1185611452,59660451,-1413339554,-1645221889,1970356570,186894069,-180055886,-140978704,-911374439,-801208650,821994443,-1401949220,-1504062245,-1422831935,1241234169,-502020745,1519904088,-727719515,225951517,-2027629867,-1457437475,-1606469350,-1686522704,-89262209,-2123223594,478488931,1927446245,39092499,-1654283473,787338462,1262729464,-428104194,-1345987657,200121987,486405961,-1371114731,-807601202,-1197462559,-1607733725,1769763759,318745773,-1610116471,859753460,1000775397,-551436458,134018325,-582530948,-1556715939,-718504834,-1083987810,1643371434,1586042412,-1786138903,1337936351,-1338952240,1816947834,1946981512,1594431486,-1469851717,2041534146,-1972643255,-982609980,-1729943073,1934866219,-214375566,1844336007,-2105742646,2144615869,-1793870382,-369668215,1772150234,-1510953241,1316053714,1195339744,-788665183,400853741,1888482184,330888811,1853431351,-498266203,1325232199,-1163595948,-1694599325,-727489938,-814667952,2138219253,1844287899,-69375438,57284557,-804657164,1252751700,744552703,-307258323,299160823,-84479130,1766930383,1857551044,484681077,-2010451715,-473224021,978957803,1390222115,119754675,498856976,1304518161,-403751816,2060171837,-1766680407,-1896288824,-2058490264,1277047161,1553762214,852081598,123274606,-713049743,-1804629859,-836016181,-178336924,-945632074,1434428242,-1026297899,-1732977913,1158183183,731018372,-160268859,1464341130,-917094491,1473855199,-2044027787,-1223459847,-708260256,-1259407377,70092426,-1441769519,-1584565060,990116894,-649046482,-1764451740,76729086,510443073,-1411702673,-124850663,-1729440371,1709041786,2083937247,-131409837,190481341,1885844671,-516858134,2107600296,-505125731,1610266075,-238285881,1777951374,1479061154,1248425530,-2142723017,-98023719,568305320,152676582,-1383051027,-861336001,-1036815385,-828700434,-620648719,-23223683,255938498,2145797254,-1741162906,-1600973452,1231804318,-2032409655,1539991280,-458641387,1844026266,1580834614,1574429687,-1694376501,852011640,-606510060,-1629217594,-1177706162,-1830958251,-705173101,-274727605,1382784342,-1315662197,-1451783453,-239340557,-1729513991,-1934206559,1947630579,-605298095,-1036521501,2125916472,1807050616,-840597100,-1848157937,1537396125,-379667366,-285459628,1302533406,-84249869,1022460524,-377555020,1933054174,-957932535,-1340711794,-1375505413,-860153914,1408584411,1198212567,18356046,915208337,1884288304,-1074595860,1135291805,2140478145,-1992360936,-401664490,1696526270,1804909303,-965519940,-1058063908,-2058003469,-1092598881,596816577,-814541092,-506501242,-1641733010,-394795995,2137455831,-1220625208,1484938986,-1340086304,671065899,809236842,699381241,-329795097,-335881669,-496763786,-1128822062,-311963736,911930412,402351971,-624873224,2136013839,731802259,-826822681,-1214535710,-1568969090,-352550967,1073189819,1946557372,-1644837118,1089573031,-1724525734,1019128793,-1187043810,-570629483,-1568071391,-711534930,-228918809,-737264948,-157294265,1062473608,1511547279,1394875482,843639902,-1947071273,-836995078,-887569019,855629432,1902108545,-705022231,-255002628,-1094385436,2124541551,923920574,929485208,-269331722,-608475283,807779322,2002627999,496979211,-1360667158,-501562650,-1378254977,-763816857,-1590785287,-117124761,1038958054,-1177323987,962192734,-1086667714,618901197,1084339860,981685917,-509668503,1474851041,-275858220,-623068455,338638780,130442241,-1967917248,2095631340,2021924583,-409977636,382584628,1936602689,167880796,-1108375063,-60965667,-377186796,165835238,1943134664,1597895615,-862260164,1611543586,1134456311,800226994,-202284853,-2020816956,1537082026,-1940407093,-885263580,-1078747801,-119116978,-995100696,1588855094,48060150,1827151333,242675145,-645401137,686740764,666679947,-1562659507,1276235062,248707238,1441360362,-11359756,-4374532,1887022999,-689609738,-552078809,-1119943309,-1589967525,-1539462725,-1610758243,1927886511,109132523,-392998109,474374437,-127229100,23855545,-278475334,1409207882,520894172,854799039,1385315303,-672264799,1842990263,-23740993,-614205607,518060914,1298262437,-2029077724,-1174598345,-1812423803,1700061581,-1485841642,-1980103489,-393951032,-40357987,382714490,-1409981641,109019486,657848381,-67120106,1523185347,-299394786,1915211186,-1182862036,727054471,832726293,1000633797,-1345567620,599080185,-1858310033,327113668,911961852,-148479335,-1277051813,948431243,-555640371,-1183211363,-538583913,879834510,-1274320681,-1430827565,-1158647611,458927865,-947956334,-832059825,-75282523,1666213220,-489575435,1050183032,-1388843756,-1589121069,-2105547012,1720084340,-283315065,1522863091,236925599,-1634229766,1994151007,-1755033597,1909159244,-740547023,1335602405,-599523085,626995605,2036278026,-70425219,-1881432175,-1092883160,1399109196,1759555380,-1141281990,153727261,884027943,-148512785,-616005,-1482715275,463422647,-88547372,-839922825,904736236,-1783758446,-1313651314,-994847681,-648307080,-2010471438,-1485270463,2124950391,-1964911000]};
});
/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/. */

// A utility to check and log password strength

define('passwordcheck',[
  'bloomfilter',
  'bloomdata-top100k'
], function (BloomFilter, bloomdata) {
  'use strict';

  return function (options) {
    options = options || {};
    var minLength = options.minLength || 8;

    var numberOfHashes = bloomdata.numberOfHashes;
    var bloomFilterData = bloomdata.bloomFilterData;
    var bloom = new BloomFilter(bloomFilterData, numberOfHashes);

    var MESSAGES = {
      BLOOMFILTER_HIT: 'BLOOMFILTER_HIT',
      MISSING_PASSWORD: 'MISSING_PASSWORD',
      NOT_STRONG_ENOUGH: 'NOT_STRONG_ENOUGH',
      PASSWORD_NOT_A_STRING: 'PASSWORD_NOT_A_STRING',
      PASSWORD_TOO_SHORT: 'PASSWORD_TOO_SHORT',
      SUCCESS: 'SUCCESS'
    };

    function isAllLetters(password) {
      return /^[a-zA-Z]+$/.test(password);
    }

    function isAllNumbers(password) {
      return /^[0-9]+$/.test(password);
    }

    function isTooShort(password) {
      return password.length < minLength;
    }

    function isLongEnough(password) {
      return password.length >= (minLength + 4);
    }

    return function (password, callback) {
      if (! password) {
        callback(MESSAGES.MISSING_PASSWORD);
      } else if (typeof password !== 'string') {
        callback(MESSAGES.PASSWORD_NOT_A_STRING);
      } else if (isTooShort(password)) {
        callback(MESSAGES.PASSWORD_TOO_SHORT);
      } else if (isLongEnough(password)) {
        // password is long enough, it's automatically good.
        callback(MESSAGES.SUCCESS);
      // password is non-empty, a string and length greater
      // than minimum length, shorter than the strong length.
      } else if (isAllLetters(password)) {
        callback(MESSAGES.NOT_STRONG_ENOUGH);
      } else if (isAllNumbers(password)) {
        callback(MESSAGES.NOT_STRONG_ENOUGH);
      // Only if the password has a chance of being
      // strong, but not too strong, is the bloom filter
      // checked. All the above tests mean the bloomfilter
      // data set can be shrunk significantly.
      } else if (bloom.test(password)) {
        callback(MESSAGES.BLOOMFILTER_HIT);
      } else {
        callback(MESSAGES.SUCCESS);
      }
    };
  };
});

